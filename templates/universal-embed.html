<script>
    (function () {
        var GH_USER = "traffy-sod";
        var GH_REPO = "rc-item-json";
        var GH_TAG = "main";

        var root = document.getElementById("feature-root");
        if (!root) return;

        var sectionPath = root.getAttribute("data-section");
        if (!sectionPath) return;

        var BASE = "https://cdn.jsdelivr.net/gh/" + GH_USER + "/" + GH_REPO + "@" + GH_TAG + "/";

        fetch(BASE + sectionPath, { cache: "force-cache" })
            .then(function (r) { if (!r.ok) throw new Error("HTTP " + r.status); return r.text(); })
            .then(function (html) {
                var tmp = document.createElement("div");
                tmp.innerHTML = html;

                var sectionRoot = tmp.querySelector(".tabs-models") || tmp.firstElementChild;
                if (!sectionRoot) throw new Error("No .tabs-models in section");

                // forward attributes BEFORE any script executes
                ["data-base", "data-part", "data-v", "data-source"].forEach(function (attr) {
                    if (root.hasAttribute(attr)) sectionRoot.setAttribute(attr, root.getAttribute(attr));
                });

                // append section FIRST
                root.appendChild(sectionRoot);

                // now re-execute inline scripts inside the section
                var nodes = Array.prototype.slice.call(tmp.childNodes);
                nodes.forEach(function (node) {
                    if (node === sectionRoot) return;
                    if (node.tagName === "SCRIPT") {
                        var s = document.createElement("script");
                        if (node.src) s.src = node.src; else s.textContent = node.textContent;
                        sectionRoot.appendChild(s);
                    } else {
                        root.appendChild(node);
                    }
                });
            })
            .catch(function (err) {
                console.warn("Section load failed:", err);
            });
    })();
</script>